function generateSection(book,body,iconUrl) {
  //body = book.renderBlock('markdown', body);
  book.renderBlock('markdown', '* This is **Markdown**')
    .then(function(str) {
        body = str;
     })
     console.log(iconUrl);
   body =  '<div class="code-block"><div class="top-section"><div class="img-box"><img class="opt-icon" src="../'+iconUrl+'/gitbook/gitbook-plugin-toggle-section/icon_add.png" section-type="close" width=20 height=20>'
    +'<span class="brief-text"></span></div></div>'
    +'<div class="toggle-section" style="display:none"><pre><code>' + body + '</code></pre></div>'
    +'</div>';

  return body;
          
}

module.exports = {
  website: {
    assets: "./book",
    js: [
      "toggle.js"
    ],
    css: [
      "toggle.css"
    ]
  },
  blocks: {
    "accordion": {
      process: function(blk) {
        
        return {
          body : generateSection(this, blk.body.trim(),blk.kwargs.iconUrl),
          parse : false
        }
      }
    }
  }
};